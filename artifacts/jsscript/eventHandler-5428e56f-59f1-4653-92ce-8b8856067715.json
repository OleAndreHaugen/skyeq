{
	"id": "5428e56f-59f1-4653-92ce-8b8856067715",
	"createdAt": "2022-09-25T14:37:56.000Z",
	"createdBy": "ole-andre.haugen@neptune-software.com",
	"globalScripts": [],
	"externalModules": [],
	"entitySets": [
		{
			"id": "162ad9ae-3352-414b-bfb1-dad4e8dc7a81",
			"name": "skyeq_master",
			"contextname": "skyeq_master"
		},
		{
			"id": "a059db08-d20c-4964-a17d-34db8ce204af",
			"name": "skyeq_queue",
			"contextname": "skyeq_queue"
		},
		{
			"id": "7eb1387e-c27c-4a18-b763-ce884649aa63",
			"name": "skyeq_status",
			"contextname": "skyeq_status"
		}
	],
	"apis": [],
	"name": "eventHandler",
	"ver": "22.9.27.947",
	"description": null,
	"content": [
		"==OBJECT STRING==",
		"const { In } = operators;\r",
		"\r",
		"try {\r",
		"\r",
		"    let EventRes = {\r",
		"        process: payload.process,\r",
		"        data: null\r",
		"    };\r",
		"\r",
		"    switch (payload.process) {\r",
		"\r",
		"        case \"updateQueue\":\r",
		"            const recUpdate = await entities.skyeq_master.save(payload.data);\r",
		"            EventRes.data = await entities.skyeq_master.findOne(recUpdate);\r",
		"            break;\r",
		"\r",
		"        case \"leaveQueue\":\r",
		"            const recDelete = await entities.skyeq_master.findOne({ identifier: payload.data.identifier });\r",
		"            await entities.skyeq_master.delete({ identifier: payload.data.identifier });\r",
		"            EventRes.data = recDelete;\r",
		"            break;\r",
		"\r",
		"        case \"rateOrder\":\r",
		"            let recRating = await entities.skyeq_master.findOne({ identifier: payload.data.identifier });\r",
		"            recRating.rating = payload.data.rating;\r",
		"\r",
		"            const recSaved = await entities.skyeq_master.save(recRating);\r",
		"            EventRes.data = recSaved;\r",
		"            break;\r",
		"\r",
		"        default:\r",
		"            log.error(\"SkyeQ: Process not handled\", payload.process);\r",
		"            break;\r",
		"    }\r",
		"\r",
		"    // Trigger Event for Clients\r",
		"    await p9.events.publish(\"SkyeQClient\", EventRes);\r",
		"\r",
		"    complete();\r",
		"\r",
		"} catch (e) {\r",
		"    log.error(\"SkyeQ: Error in processing\", e);\r",
		"    complete();\r",
		"}\r",
		""
	],
	"useAsGlobalScript": false,
	"isTypescript": false,
	"transpiledContent": null,
	"lastRunSuccessful": true,
	"jsscriptGroup": "3b0bf60c-66aa-41c4-8f02-34988872c104",
	"package": "de916930-7bab-4416-b294-24cae145feab"
}