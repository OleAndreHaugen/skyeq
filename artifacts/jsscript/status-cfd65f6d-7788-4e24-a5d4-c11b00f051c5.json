{
	"id": "cfd65f6d-7788-4e24-a5d4-c11b00f051c5",
	"createdAt": "2022-09-24T08:27:43.437Z",
	"createdBy": "ole-andre.haugen@neptune-software.com",
	"globalScripts": [],
	"externalModules": [],
	"entitySets": [
		{
			"id": "162ad9ae-3352-414b-bfb1-dad4e8dc7a81",
			"name": "skyequeue",
			"contextname": "skyequeue"
		},
		{
			"id": "7eb1387e-c27c-4a18-b763-ce884649aa63",
			"name": "skyequeue_status",
			"contextname": "skyequeue_status"
		}
	],
	"apis": [],
	"name": "status",
	"ver": "22.9.24.143",
	"description": null,
	"content": [
		"==OBJECT STRING==",
		"const { In } = operators;\r",
		"\r",
		"\r",
		"try {\r",
		"\r",
		"    let num = 0;\r",
		"\r",
		"    const status = await entities.skyequeue_status.find();\r",
		"\r",
		"    const rec = await entities.skyequeue.find({\r",
		"        where: {\r",
		"            queue: req.query.queue,\r",
		"            status: In([1, 2])\r",
		"        },\r",
		"        order: {\r",
		"            createdAt: \"ASC\"\r",
		"        }\r",
		"    });\r",
		"\r",
		"    rec.forEach(function (value, index, array) {\r",
		"\r",
		"        if (value.id === req.query.id) {\r",
		"            value.highlight = \"Information\"\r",
		"            num = index + 1;\r",
		"        } else {\r",
		"            value.highlight = \"None\"\r",
		"        }\r",
		"\r",
		"        const statusRec = status.find(status => status.status === value.status);\r",
		"\r",
		"        if (statusRec) {\r",
		"            value.status = statusRec.name;\r",
		"            value.state = statusRec.state;\r",
		"        }\r",
		"\r",
		"    });\r",
		"\r",
		"    result.data = {\r",
		"        status: \"Success\",\r",
		"        data: rec,\r",
		"        num: num\r",
		"    };\r",
		"\r",
		"    complete();\r",
		"\r",
		"} catch (e) {\r",
		"\r",
		"\r",
		"    result.data = {\r",
		"        status: \"Error\",\r",
		"        description: e\r",
		"    };\r",
		"\r",
		"    complete();\r",
		"}\r",
		"\r",
		""
	],
	"useAsGlobalScript": false,
	"isTypescript": false,
	"transpiledContent": null,
	"lastRunSuccessful": true,
	"jsscriptGroup": "3b0bf60c-66aa-41c4-8f02-34988872c104",
	"package": "de916930-7bab-4416-b294-24cae145feab"
}